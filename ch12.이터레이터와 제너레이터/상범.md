# 12ì¥ ì´í„°ë ˆì´í„°ì™€ ì œë„ˆë ˆì´í„°

# ì´í„°ë ˆì´í„°

ë°°ì—´, í˜•ì‹í™”ë°°ì—´, ë¬¸ìì—´, Set, Map ê°ì²´ëŠ” ëª¨ë‘ ì´í„°ëŸ¬ë¸” ì…ë‹ˆë‹¤. ê·¸ë˜ì„œ for/of ë£¨í”„ë¡œ ì´ëŸ° ë°ì´í„° êµ¬ì¡°ì˜ ì½˜í…ì¸ ë¥¼ ìˆœíšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì œë„ˆë ˆì´í„°ì˜ ì¼ì°¨ì ì¸ ì„¤ê³„ ëª©ì ì€ ì´í„°ë ˆì´í„°ë¥¼ ì‰½ì„¸ ìƒì„±í•˜ëŠ” ê²ƒì´ë‹¤

## ë™ì‘ ë°©ë²•

ìë°”ìŠ¤í¬ë¦½íŠ¸ ìˆœíšŒë¥¼ ì´í•´í•˜ë ¤ë©´ ì„¸ê°€ì§€ë¥¼ ì•Œì•„ì•¼í•œë‹¤.

- ì´í„°ëŸ¬ë¸” ê°ì²´(ë°°ì—´, ì„¸íŠ¸, ë§µ ê°™ì´ ìˆœíšŒí•  ìˆ˜ ìˆëŠ” íƒ€ì…ì˜ ê°ì²´)

```jsx
**Symbol.iterator**ë¼ëŠ” ì´í„°ë ˆì´í„° ë©”ì„œë“œë¥¼ ê°€ì§„ ê°ì²´
```

- ì´í„°ë ˆì´í„° ê°ì²´ ìì²´ (ìˆœíšŒë¥¼ ìˆ˜í–‰í•˜ëŠ” ê°ì²´ ìì²´)

```jsx
**next**()ë©”ì„œë“œê°€ ìˆëŠ” ê°ì²´
```

- ìˆœíšŒ ê²°ê³¼ ê°ì²´

```jsx
**value**ì™€ **done** í”„ë¡œí¼í‹°ê°€ ìˆëŠ” ê°ì²´
```

> ì¦‰ ë‹¤ì‹œ ë§í•˜ë©´, ì´í„°ëŸ¬ë¸” ê°ì²´ë€ ì´í„°ë ˆì´í„° ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” íŠ¹ë³„í•œ ì´í„°ë ˆì´í„° ë©”ì„œë“œ(Symbol.iterator)ë¥¼ ê°€ì§„ ê°ì²´ì´ë‹¤. ë˜í•œ ì´í„°ë ˆì´í„° ê°ì²´ëŠ” ìˆœíšŒ ê²°ê³¼ ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” next() ë©”ì„œë“œê°€ ìˆëŠ” ê°ì²´ì´ë‹¤.
> 

`ì´í„°ëŸ¬ë¸” ê°ì²´ iterableì„ ìˆœíšŒí•˜ëŠ” ë‹¨ìˆœí•œ for/of ë£¨í”„ ì˜ˆì‹œ`

```jsx
// ê°ì²´ ìƒì„±
const iterable = [99];
// ì´í„°ë ˆì´í„° ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ì´í„°ë ˆì´í„° ê°ì²´ ìƒì„±
const iterator = iterable[Symbol.iterator]();
for (let result = iterator.next(); !result.done; result = iterator.next()) {
  console.log(result.value); // 99
}
```

`ì´í„°ëŸ¬ë¸” ê°ì²´ê°€ ì•„ë‹Œê²½ìš°ì— ìœ ì‚¬í•˜ê²Œ ë™ì‘í•˜ë„ë¡ ë§Œë“¤ìˆ˜ ìˆë‹¤`

```jsx
let range = {
  from: 1,
  to: 5,
 
  [Symbol.iterator]() { // ìƒì„±ì
    this.current = this.from;
    this.last = this.to;
    return this; // ìê¸° ìì‹ ì„ ë°˜í™˜. ìê¸°ìì‹ ì—” next()ë©”ì†Œë“œê°€ ì •ì˜ë˜ì–´ìˆìœ¼ë‹ˆ, next()ë©”ì†Œë“œ
                 // ì—ì„œì˜ thisëŠ” ìƒì„±ìë¡œ ìƒì„±ëœ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ê²Œ ëœë‹¤.
  },
 
  next() { // ì•„ì˜ˆ ê°ì²´ì•ˆì— next()ë©”ì„œë“œë¥¼ ì •ì˜.
    if (this.current <= this.to) {
      return { done: false, value: this.current++ };
    } else {
      return { done: true };
    }
  }
};
 
for (let num of range) {
  alert(num); // 1, 2, 3, 4, 5
}
```

> ì¶œì²˜ : [https://inpa.tistory.com/entry/JS-ğŸ“š-ì´í„°ëŸ¬ë¸”-ì´í„°ë ˆì´í„°-ğŸ’¯ì™„ë²½-ì´í•´](https://inpa.tistory.com/entry/JS-%F0%9F%93%9A-%EC%9D%B4%ED%84%B0%EB%9F%AC%EB%B8%94-%EC%9D%B4%ED%84%B0%EB%A0%88%EC%9D%B4%ED%84%B0-%F0%9F%92%AF%EC%99%84%EB%B2%BD-%EC%9D%B4%ED%95%B4)
> 

## ì´í„°ëŸ¬ë¸” ê°ì²´ ë§Œë“¤ê¸°

í´ë˜ìŠ¤ë¥¼ ì´í„°ëŸ¬ë¸”ë¡œ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ë°˜ë“œì‹œ ì´ë¦„ì´Â `Symbol.iterator`ì¸ ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤. ì´ ë©”ì„œë“œëŠ” ë°˜ë“œì‹œÂ `next()`Â ë©”ì„œë“œê°€ ìˆëŠ” ì´í„°ë ˆì´í„° ê°ì²´ë¥¼ ë°˜í™˜í•´ì•¼í•œë‹¤.Â `next()`Â ë©”ì„œë“œëŠ” ë°˜ë“œì‹œ ìˆœíšŒ ê²°ê³¼ ê°ì²´ë¥¼ ë°˜í™˜í•´ì•¼ í•˜ë©° ìˆœíšŒ ê²°ê³¼ ê°ì²´ì—ëŠ” value í”„ë¡œí¼í‹°ì™€ ë¶ˆ done í”„ë¡œí¼í‹° ì¤‘ í•˜ë‚˜ëŠ” ë°˜ë“œì‹œ ì¡´ì¬í•´ì•¼ í•œë‹¤.

```jsx
class Range {
  constructor(from, to) {
    this.from = from;
    this.to = to;
  }

  has(x) {
    return typeof x === 'number' && this.from <= x && x <= this.to;
  }

  toString() {
    return `{x | ${this.from} <= x ${this.to}}`;
  }

  // ì´í„°ë ˆì´í„° ê°ì²´ ë°˜í™˜ -> ì´í„°ëŸ¬ë¸”ì„ ë§Œë“¤ê¸° ìœ„í•´ì„œ
  [Symbol.iterator]() {
    let next = Math.ceil(this.from);
    const last = this.to;
    return {
      // next() ë©”ì„œë“œê°€ ì´í„°ë ˆì´í„° ê°ì²´ì˜ í•µì‹¬
      next() {
        return next <= last ? { value: next++ } : { done: true };
      },

      [Symbol.iterator]() {
        return this;
      }
    };
  }
}

for (const x of new Range(1, 10)) console.log(x); // 1ë¶€í„° 10ê¹Œì§€ ìˆ«ì
console.log(...new Range(-2, 2)); // -2 -1 0 1 2
```

> ì´í„°ëŸ¬ë¸” ê°ì²´ì™€ ì´í„°ë ˆì´í„° í•µì‹¬ íŠ¹ì§• ì¤‘ í•˜ë‚˜ëŠ” ì´ë“¤ì´ ë³¸ì§ˆì ìœ¼ë¡œÂ ëŠê¸‹í•˜ë‹¤(lazy)ëŠ” ê²ƒì´ë‹¤. ë”°ë¼ì„œÂ ê·¸ ê°’ì´ ì‹¤ì œ í•„ìš”í•  ë•Œê¹Œì§€ ê³„ì‚°ì„ ëŠ¦ì¶”ì–´ ë©”ëª¨ë¦¬ë¥¼ ì•„ë‚„ ìˆ˜ ìˆë‹¤.
> 

### ì´í„°ë ˆì´í„° 'ì¢…ë£Œ': return ë©”ì„œë“œ

ì´í„°ë ˆì´í„° ê°ì²´ì— ì¢…ë£Œë¥¼ ìœ„í•´Â `return()`Â ë©”ì„œë“œê°€ ì‚¬ìš©ë˜ê¸°ë„ í•œë‹¤.

> next()ê°€ done í”„ë¡œí¼í‹°ê°€ trueì¸ ìˆœíšŒ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ê¸° ì „ì— ìˆœíšŒë¥¼ ë§ˆì³ì•¼ í•œë‹¤ë©´ ì¸í„°í”„ë¦¬í„°ëŠ” ì´í„°ë ˆì´í„° ê°ì²´ì—Â return()Â ë©”ì„œë“œê°€ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.
> 

# ì œë„ˆë ˆì´í„°

`function*`Â í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì •ì˜í•œë‹¤. ì´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì œë„ˆë ˆì´í„° ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.

```jsx
function* oneDigitPrimes() {
  yield 2;
  yield 3;
  yield 5;
  yield 7;
}

// ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ì œë„ˆë ˆì´í„°ë¥¼ ìƒì„±í•œë‹¤.
const primes = oneDigitPrimes();

console.log(primes.next().value); // 2
console.log(primes.next().value); // 3
console.log(primes.next().value); // 5
console.log(primes.next().value); // 7
console.log(primes.next().done); // true

// ì œë„ˆë ˆì´í„°ëŠ” ë‹¤ë¥¸ ì´í„°ëŸ¬ë¸” íƒ€ì…ì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
console.log([...oneDigitPrimes()]); // [2, 3, 5, 7]
```

> í‘œí˜„ì‹ìœ¼ë¡œ ì œë„ˆë ˆì´í„° ì •ì˜ëŠ” ê°€ëŠ¥í•˜ì§€ë§Œ í™”ì‚´í‘œ í•¨ìˆ˜ ë¬¸ë²•ì€ ë¶ˆê°€ëŠ¥í•˜ë‹¤. ë˜í•œ ì œë„ˆë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ì´í„°ëŸ¬ë¸” í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê¸° ì‰½ë‹¤.
> 

```jsx
// Range í´ë˜ìŠ¤ì—ì„œ ì œë„ˆë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì€ ê²½ìš°
  // ì´í„°ë ˆì´í„° ê°ì²´ ë°˜í™˜ -> ì´í„°ëŸ¬ë¸”ì„ ë§Œë“¤ê¸° ìœ„í•´ì„œ
  [Symbol.iterator]() {
    let next = Math.ceil(this.from);
    const last = this.to;
    return {
      // next() ë©”ì„œë“œê°€ ì´í„°ë ˆì´í„° ê°ì²´ì˜ í•µì‹¬
      next() {
        return next <= last ? { value: next++ } : { done: true };
      },

      [Symbol.iterator]() {
        return this;
      }
    };
  }

// Range í´ë˜ìŠ¤ì—ì„œ ì œë„ˆë ˆì´í„°ë¥¼ ì‹œìš©í•œ ê²½ìš°
  *[Symbol.iterator]() {
    for(let x = Math.ceil(this.from); x <= this.to; x++) yield x;
  }
```

`ì œë„ˆë ˆì´í„°ë¥¼ í™œìš”í•œ í”¼ë³´ë‚˜ì¹˜ ìˆ˜ì—´`

```jsx
function* fibonacciSequence() {
  let x = 0;
  let y = 1;
  for (;;) {
    yield y;
    [x, y] = [y, x + y];
  }
}

function fibonacci(n) {
  for (const f of fibonacciSequence()) {
    if (n-- <= 0) return f;
  }
}

console.log(fibonacci(20)); // 10946

// ë¬´í•œí•œ ì œë„ˆë ˆì´í„°ë¥¼ take() ì œë„ˆë ˆì´í„°ì™€ í•¨ê»˜ ì‚¬ìš©í•œ ê²½ìš°
function* take(n, iterable) {
  // ì´í„°ë ˆì´í„° ê°ì²´ ìƒì„±
  const it = iterable[Symbol.iterator]();
  while (n-- > 0) {
    const next = it.next();
    if (next.done) return;
    yield next.value;
  }
}

console.log([...take(5, fibonacciSequence())]); // 1 1 2 3 5
```

â€¦

**ì‚¬ì‹¤ 12ì¥ì€ ì±…ì˜ í‚¤ì›Œë“œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì•„ë˜ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ë³´ê³  ì´í•´í–ˆë‹¤. ì§„ì§œ ì •ë¦¬ ì˜í•´ì£¼ì…¨ë‹¤.**

> [https://inpa.tistory.com/entry/JS-ğŸ“š-ì´í„°ëŸ¬ë¸”-ì´í„°ë ˆì´í„°-ğŸ’¯ì™„ë²½-ì´í•´](https://inpa.tistory.com/entry/JS-%F0%9F%93%9A-%EC%9D%B4%ED%84%B0%EB%9F%AC%EB%B8%94-%EC%9D%B4%ED%84%B0%EB%A0%88%EC%9D%B4%ED%84%B0-%F0%9F%92%AF%EC%99%84%EB%B2%BD-%EC%9D%B4%ED%95%B4)   
[https://inpa.tistory.com/entry/JS-ğŸ“š-ì œë„ˆë ˆì´í„°-ì´í„°ë ˆì´í„°-ê°•í™”íŒ](https://inpa.tistory.com/entry/JS-%F0%9F%93%9A-%EC%A0%9C%EB%84%88%EB%A0%88%EC%9D%B4%ED%84%B0-%EC%9D%B4%ED%84%B0%EB%A0%88%EC%9D%B4%ED%84%B0-%EA%B0%95%ED%99%94%ED%8C%90)
>
